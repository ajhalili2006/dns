#!/bin/bash

# Get list of zones (and thus filenames)
yq '.zones | keys | .[]' config/production.yaml | while read -r zone; do
  # For each file...
  FILENAME="$zone"yaml
  echo Sorting $FILENAME

  # Sort the keys in the file
  yq -iMP 'sort_keys(.)' $FILENAME
  # - i: in-place
  # - M: no color
  # - P: pretty print
done
